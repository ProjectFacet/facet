{% extends 'base.html' %}

{% load i18n %}
{% load bootstrap3 %}

<!-------------------------------------------->
<!--      BREADCRUMB NAVIGATION             -->
<!-------------------------------------------->

{% block breadcrumb %}
<div>
    <ol class="breadcrumb icon-angle-right icon-th">
        <li class="fadeIn"><a href="{% url 'dashboard' %}" title="Go to Dashboard"> Dashboard </a></li>
        <li class="fadeIn"><a href="{% url 'team_list' %}" title="View Team"> Team </a></li>
        <li class="fadeIn"><a href="{% url 'user_detail' user.id %}" title="View {{ user.credit_name}} Profile"> {{ user.credit_name}} </a></li>
        <li class="fadeIn"><a href="{% url 'user_edit' user.id %}" title="You are here"> Edit {{ user.credit_name}} </a></li>
    </ol>
</div>
{% endblock breadcrumb %}

<!-------------------------------------------->
<!--            Main Section                -->
<!-------------------------------------------->

{% block content %}
<!-- Row One -->
<div class="row m-b-40">
    <div class="col-xs-12 col-sm-12 col-md-2 col-lg-2">
        <a class="media-left media-middle"> {% if user.display_photo %}<img class="centered h-200 w-200 m-r-40" src="{{ user.display_photo.url }}" id="user-profile-photo" alt="profile image">{% else %}{% endif %} </a>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
        <h4 class="m-t-5 m-b-10"><a href="{% url 'user_detail' user.id %}">{{ user.credit_name }}</a></h4>
        <p class="f-s-300"> <span class="color-white m-r-20">{{ user.title }}</span> | <span class="color-white m-l-20 m-r-20">{{user.organization.name}}</span> | <i class="fa fa-map-marker color-white m-l-20"></i> <span class="color-white m-r-20">{{ user.location }}</span></p>
        <p class="f-s-300"> <i class="fa fa-phone color-white"></i> <span class="color-white m-r-20">{{ user.phone }}</span> | <i class="fa fa-envelope-o color-white m-l-20"></i> <span class="color-white m-r-20">{{ user.email }}</span> </p>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-5 col-lg-5">
      <h5 class="m-t-40"> Bio</h5>
      <p>{{user.bio}}</p>
    </div>
</div>

{% if request.user.id == user.id or request.user.id == user.organization.owner.id %}

<div class="row m-b-40">
  <p class="mb-4x tiny-text">Edit {% if request.user.id == user.id %} your {% else %} {{ user.credit_name }}'s {% endif %}profile and click Save to keep changes.</p>
</div>


<div class="row">
  <form class="form-basic post-form" method="POST" enctype="multipart/form-data">{% csrf_token %}
          <!-- Left Column -->
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">

            <!-- User First Name -->
            <div class="row">
            <fieldset class="form-group m-b-20">
              <div class="col-xs-2 offset-xs-1">
                <label>{{ form.first_name.label_tag }}</label>
              </div>
              <div class="col-xs-9">
                {{ form.first_name }}
                {% if form.first_name.errors %}
                <small class="text-muted">{{ form.first_name.errors }}</small>
                {% endif %}
              </div>
            </fieldset>
            </div>
            <!-- User Last Name -->
            <div class="row">
            <fieldset class="form-group m-b-20">
              <div class="col-xs-2 offset-xs-1">
                <label>{{ form.last_name.label_tag }}</label>
              </div>
              <div class="col-xs-9">
                {{ form.last_name }}
                {% if form.last_name.errors %}
                <small class="text-muted">{{ form.last_name.errors }}</small>
                {% endif %}
              </div>
            </fieldset>
            </div>
            <!-- User Credit Name -->
            <div class="row">
            <fieldset class="form-group m-b-20">
              <div class="col-xs-2 offset-xs-1">
                <label>{{ form.credit_name.label_tag }}</label>
              </div>
              <div class="col-xs-9">
                {{ form.credit_name }}
                {% if form.credit_name.errors %}
                <small class="text-muted">{{ form.credit_name.errors }}</small>
                {% endif %}
              </div>
            </fieldset>
            </div>
            <!-- User Username -->
            <div class="row">
            <fieldset class="form-group m-b-20">
              <div class="col-xs-2 offset-xs-1">
                <label>{{ form.username.label_tag }}</label>
              </div>
              <div class="col-xs-9">
                {{ form.username }}
                {% if form.username.errors %}
                <small class="text-muted">{{ form.username.errors }}</small>
                {% endif %}
              </div>
            </fieldset>
            </div>
            <!-- User Title -->
            <div class="row">
            <fieldset class="form-group m-b-20">
              <div class="col-xs-2 offset-xs-1">
                <label>{{ form.title.label_tag }}</label>
              </div>
              <div class="col-xs-9">
                {{ form.title }}
                {% if form.title.errors %}
                <small class="text-muted">{{ form.title.errors }}</small>
                {% endif %}
              </div>
            </fieldset>
            </div>
            <!-- User Location -->
            <div class="row">
            <fieldset class="form-group m-b-20">
              <div class="col-xs-2 offset-xs-1">
                <label>{{ form.location.label_tag }}</label>
              </div>
              <div class="col-xs-9">
                {{ form.location }}
                {% if form.location.errors %}
                <small class="text-muted">{{ form.location.errors }}</small>
                {% endif %}
              </div>
            </fieldset>
            </div>
            <!-- User Email -->
            <div class="row">
            <fieldset class="form-group m-b-20">
              <div class="col-xs-2 offset-xs-1">
                <label>{{ form.email.label_tag }}</label>
              </div>
              <div class="col-xs-9">
                {{ form.email }}
                {% if form.email.errors %}
                <small class="text-muted">{{ form.email.errors }}</small>
                {% endif %}
              </div>
            </fieldset>
            </div>
            <!-- User Phone -->
            <div class="row">
            <fieldset class="form-group m-b-20">
              <div class="col-xs-2 offset-xs-1">
                <label>{{ form.phone.label_tag }}</label>
              </div>
              <div class="col-xs-9">
                {{ form.phone }}
                {% if form.phone.errors %}
                <small class="text-muted">{{ form.phone.errors }}</small>
                {% endif %}
              </div>
            </fieldset>
            </div>

            <h4 class="m-b-20">Profiles</h4>

            <!-- User Website -->
            <div class="row">
            <fieldset class="form-group m-b-20">
              <div class="col-xs-2 offset-xs-1">
                <label>{{ form.website.label_tag }}</label>
              </div>
              <div class="col-xs-9">
                {{ form.website }}
                {% if form.website.errors %}
                <small class="text-muted">{{ form.website.errors }}</small>
                {% endif %}
              </div>
            </fieldset>
            </div>

          </div>
          <!-- Right Column -->
          <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">

            <!-- User Bio -->
            <fieldset class="form-group m-b-20">
              <div class="col-xs-2">
                <label>{{ form.bio.label_tag }}</label>
              </div>
              <div class="col-xs-10">
                {{ form.bio }}
                {% if form.bio.errors %}
                <small class="text-muted">{{ form.bio.errors }}</small>
                {% endif %}
              </div>
            </fieldset>
            <!-- User Expertise -->
            <fieldset class="form-group m-b-20">
              <div class="col-xs-2">
                <label>{{ form.expertise.label_tag }}</label>
              </div>
              <div class="col-xs-10">
                {{ form.expertise }}
                {% if form.bio.errors %}
                <small class="text-muted">{{ form.expertise.errors }}</small>
                {% endif %}
              </div>
            </fieldset>
            <!-- User Profile Photo -->
            <div class="form-group custom-form">
              <a href="#" data-toggle="tooltip" title="{{ form.photo.help_text }}"><span class="field-label">{{ form.photo.label_tag }}</span></a>
              {{ form.photo }}
              {% if form.photo.errors %}
                <div class="alert alert-warning" role="alert">
                {{ form.photo.errors }}
                </div>
              {% endif %}
            </div>
            <!-- Is User Public? -->
            {% if request.user.user_type == "Admin" or request.user.user_type == "Editor" %}

            <h4>List publicly</h4>
            {% if request.user.user_type == "Admin" or request.user.user_type == "Editor" %}
            <p>Would you like to be listed publicly and viewable to contractor users?</p>
            {% endif %}
            <fieldset class="form-group m-b-20">
              <div class="col-xs-2">
                <label>{{ form.public.label_tag }}</label>
              </div>
              <div class="col-xs-10">
                {{ form.public }}
                {% if form.public.errors %}
                <small class="text-muted">{{ form.public.errors }}</small>
                {% endif %}
              </div>
            </fieldset>

            {% endif %}


            <a href="{% url 'user_detail' user.id %}"><button type="submit" class="btn btn-danger-100 pull-right m-r-10">Cancel</button></a>
            <button id="edit-button" class="btn btn-default pull-right m-r-10" type="submit">{% trans "Save" %}</button>
          </div> <!-- End of Right Column -->
  </form>
</div><!-- End of Row -->

{% else %}
<p>You are not authorized to edit this page.</p>
{% endif %}
{% endblock %}
