{% extends 'base.html' %}

{% load i18n %}
{% load bootstrap3 %}

{% block content %}

<div class="row particles" id="user-hero">
  <div class="upper-content">
    <div class="col-xs-12 content-upper-75">
      <h1 class="media-heading text-light center thin uppercase spread-025">{{ user.credit_name }}'s Notes <small><a href="#" data-toggle="modal" data-target="#addUserNote" title="Add User Note"><i class="fa fa-plus sameline dark"></i></a></small></h1>
    </div>
  </div>
</div>

<div class="row content-lower-10">
  <div class="col-xs-12">
    <div class="displaynotes">
    {% for note in usernotes %}
    <!-- MODAL TRIGGER -->
      <a href="#" data-toggle="modal" data-target="#addNote{{note.id}}">
        <div class="col-md-3 col-lg-2">
          <div class="panel fade in panel-default note-panel" data-init-panel="true">
            <div class="panel-body">
              <div class="media">
                <div class="media-left">
                  <!-- Place icon or image here -->
                </div>
                <div class="media-body">
                  <h5 class="media-heading brighter">{{ note.title }}</h5>
                  <p class="help-block tiny-text bright">{{ note.owner.credit_name }}</p>
                </div><!-- /.media -body-->
              </div><!-- /.media -->
            </div><!-- /.panel-body -->

            <div class="progress progress-xs no-radius no-margin">
              <div class="progress-bar bg-grd-orange" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
              </div>
            </div><!-- /.progress -->
          </div><!-- /.panel -->
        </div><!-- /.cols -->
      </a>
    <!-- END MODAL TRIGGER -->
    <!-- MODAL ITSELF -->
      <div class="modal fade" id="addNote{{note.id}}" tabindex="-1" role="dialog" aria-labelledby="addaddNote{{note.id}}">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title" id="addNote{{note.id}}Label">{{ note.title }}</h4>
            </div>
            <div class="modal-body dark">
              {{ note.text|linebreaksbr }}
            </div>
            <div class="modal-footer">
              <p class="tiny-text">{{ note.owner }} | {{ note.creation_date|date:'D M j g:i a' }}<p>
              <p class="tiny-text">Keywords: {% for keyword in note.keywords %}{{ keyword }}, {% endfor %}<p>
            </div>
          </div>
        </div>
      </div>
    <!-- END MODAL -->
    {% endfor %}
  </div>
  </div>
</div>


<!-- Add Note Modal -->
<div class="modal fade" id="addUserNote" tabindex="-1" role="dialog" aria-labelledby="addUserNoteModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="addUserModalLabel">Add a note for this user</h4>
      </div>
      <div class="modal-body">
        <form action="{% url 'create_user_note' %}" method="POST" class="post-form">
        {% csrf_token %}
        {% bootstrap_form usernoteform %}
        <input type="hidden" name="user" value="{{ user.pk }}" />
        <button type="submit" class="btn btn-primary">Post Note</button>
        </form>
      </div>
      <div class="modal-footer">
      </div>
    </div>
  </div>
</div>
{% endblock %}
